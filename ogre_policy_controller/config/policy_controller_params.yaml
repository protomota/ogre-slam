ogre_policy_controller:
  ros__parameters:
    # Path to trained model (leave empty to auto-find in models/ directory)
    model_path: ""

    # Model type: 'onnx' or 'jit'
    model_type: "onnx"

    # Output mode: 'twist' (for Nav2) or 'wheel_velocities' (for direct motor control)
    output_mode: "twist"

    # Topic configuration
    # Mode 1 (twist): subscribes to input_topic, publishes Twist to output_topic
    # Mode 2 (wheel_velocities): subscribes to input_topic, publishes Float32MultiArray to output_topic
    input_topic: "/policy_cmd_vel_in"
    output_topic: "/cmd_vel"

    # CRITICAL: action_scale is max wheel velocity in rad/s sent to articulation controller
    # Testing: 6.0 rad/s too slow, 200 rad/s causes flipping. 20.0 is stable.
    # Must match training config in ogre_navigation_env.py!
    action_scale: 20.0

    # Velocity limits - must match training config
    # These are the max target velocities the policy was trained on
    max_lin_vel: 1.0
    max_ang_vel: 2.0

    # Control loop frequency (Hz)
    control_frequency: 30.0

    # Robot parameters for forward kinematics (wheel velocities -> Twist)
    wheel_radius: 0.040    # 40mm
    wheelbase: 0.095       # 95mm front-rear
    track_width: 0.205     # 205mm left-right

    # Wheel joint names in order: [fl, fr, rl, rr]
    wheel_joint_names:
      - "fl_joint"
      - "fr_joint"
      - "rl_joint"
      - "rr_joint"
