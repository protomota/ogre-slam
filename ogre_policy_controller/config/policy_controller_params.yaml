ogre_policy_controller:
  ros__parameters:
    # Path to trained model (leave empty to auto-find in models/ directory)
    model_path: ""

    # Model type: 'onnx' or 'jit'
    model_type: "onnx"

    # Output mode: 'twist' (for Nav2), 'joint_state' (for Isaac Sim direct control), or 'wheel_velocities'
    output_mode: "joint_state"

    # Topic configuration
    # Mode 1 (twist): subscribes to input_topic, publishes Twist to output_topic
    # Mode 2 (wheel_velocities): subscribes to input_topic, publishes Float32MultiArray to output_topic
    input_topic: "/policy_cmd_vel_in"
    output_topic: "/cmd_vel"

    # CRITICAL: action_scale is max wheel velocity in rad/s sent to articulation controller
    # Robot flips at velocities > 8 rad/s. Must match training config!
    # Policy trained with action_scale=8.0, max_lin_vel=0.3, max_ang_vel=1.0
    action_scale: 8.0

    # Velocity limits - must match training config
    # Max achievable: 8 rad/s * 0.04m = 0.32 m/s
    max_lin_vel: 0.3
    max_ang_vel: 1.0

    # Control loop frequency (Hz)
    control_frequency: 30.0

    # Robot parameters for forward kinematics (wheel velocities -> Twist)
    wheel_radius: 0.040    # 40mm
    wheelbase: 0.095       # 95mm front-rear
    track_width: 0.205     # 205mm left-right

    # Wheel joint names in PHYSICAL order (matches training): [FR, RR, RL, FL]
    # This is the order returned by Isaac Lab's find_joints(), NOT the query order!
    wheel_joint_names:
      - "fr_joint"
      - "rr_joint"
      - "rl_joint"
      - "fl_joint"
